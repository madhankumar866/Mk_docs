monit tool for monitering service and can restart and start the service



[root@li854-185 log]# vi /etc/monit.conf 

set daemon  30              # check services at 30 seconds intervals
set logfile syslog
set httpd port 2812 and
    use address localhost  # only accept connection from localhost
    allow localhost        # allow localhost to connect to the server and
    allow admin:monit      # require user 'admin' with password 'monit'
#####EMAIL FORWARD####
set alert thilip@genxlead.com
set mailserver smtp.sendgrid.net port 587 username "chaarmathi" password "ch@@rusr1@2015!"
Set mail-format {
from: monit@completehealthnews.com
subject: commericial_website-1 [ $SERVICE ] $EVENT - $DATE
message: This is an $ACTION: $DESCRIPTION [$SERVICE]


Yours sincerely,
Thilip

}



#****** Iptables*****#
check file iptabels with path /var/lock/subsys/iptables
group firewall
start program = "/etc/init.d/iptables start"
stop  program = "/etc/init.d/iptables stop"
if 5 restarts within 5 cycles then timeout
#****** Iptables*****#





#*** Disk Space ****#
check device vda1 with path /dev/vda1
    group system
    if space usage > 80% then alert
#*** Disk Space ****#


#******* mysql *****#
check process mysqld with pidfile /var/run/mysqld/mysqld.pid
group database
start program = "/etc/init.d/mysqld start"
stop program = "/etc/init.d/mysqld stop"
if 5 restarts within 5 cycles then timeout
#******* mysql *****#


#****** vsftpd *****#
check process vsftpd matching "/usr/sbin/vsftpd"
start program = "/etc/init.d/vsftpd start"
[root@li854-185 log]# cat /etc/monit.conf 
set daemon  30              # check services at 30 seconds intervals
set logfile syslog
set httpd port 2812 and
    use address localhost  # only accept connection from localhost
    allow localhost        # allow localhost to connect to the server and
    allow admin:monit      # require user 'admin' with password 'monit'
#####EMAIL FORWARD####
set alert thilip@genxlead.com
set mailserver smtp.sendgrid.net port 587 username "chaarmathi" password "ch@@rusr1@2015!"
Set mail-format {
from: monit@completehealthnews.com
subject: commericial_website-1 [ $SERVICE ] $EVENT - $DATE
message: This is an $ACTION: $DESCRIPTION [$SERVICE]


Yours sincerely,
Thilip

}



#****** Iptables*****#
check file iptabels with path /var/lock/subsys/iptables
group firewall
start program = "/etc/init.d/iptables start"
stop  program = "/etc/init.d/iptables stop"
if 5 restarts within 5 cycles then timeout
#****** Iptables*****#





#*** Disk Space ****#
check device vda1 with path /dev/vda1
    group system
    if space usage > 80% then alert
#*** Disk Space ****#


#******* mysql *****#
check process mysqld with pidfile /var/run/mysqld/mysqld.pid
group database
start program = "/etc/init.d/mysqld start"
stop program = "/etc/init.d/mysqld stop"
if 5 restarts within 5 cycles then timeout
#******* mysql *****#


#****** vsftpd *****#
check process vsftpd matching "/usr/sbin/vsftpd"
start program = "/etc/init.d/vsftpd start"
stop program = "/etc/init.d/vsftpd stop"
if failed port 21 protocol ftp then restart
if 3 restarts within 5 cycles then alert
#****** vsftpd *****#

#*******************#
check process cron
      with pidfile "/var/run/crond.pid"
      start program = "/etc/init.d/crond start"
      stop program = "/etc/init.d/crond stop"
if 3 restarts within 3 cycles then alert
#*******************#